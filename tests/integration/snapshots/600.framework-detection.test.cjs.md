# Snapshot report for `tests/integration/600.framework-detection.test.cjs`

The actual snapshot is saved in `600.framework-detection.test.cjs.snap`.

Generated by [AVA](https://avajs.dev).

## should run `command` when both `command` and `targetPort` are configured

> Snapshot 1

    `␊
    ✨  netlify dev  ✨␊
    ␊
     ◈ Loading environment variables ␊
    ␊
    ␊
     ◈ Setting up local development server ␊
    ␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 0.0.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
     /file/path␊
    ​␊
    > Config file␊
     /file/path␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
     ◈ Starting netlify dev with custom config ␊
    ␊
    hello␊
    `

## should force a specific framework when configured

> Snapshot 1

    `␊
    ✨  netlify dev  ✨␊
    ␊
     ◈ Loading environment variables ␊
    ␊
    ␊
     ◈ Setting up local development server ␊
    ␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 0.0.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
     /file/path␊
    ​␊
    > Config file␊
     /file/path␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
     ◈ Starting netlify dev with Create React App ␊
    `

## should throw when forcing a non supported framework

> Snapshot 1

    `␊
    ✨  netlify dev  ✨␊
    ␊
     ◈ Loading environment variables ␊
    ␊
    ␊
    ◈ Invalid framework "to-infinity-and-beyond-js". It should be one of: *`

## should detect a known framework

> Snapshot 1

    `␊
    ✨  netlify dev  ✨␊
    ␊
     ◈ Loading environment variables ␊
    ␊
    ␊
     ◈ Setting up local development server ␊
    ␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 0.0.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
     /file/path␊
    ​␊
    > Config file␊
      No config file was defined: using default values.␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
     ◈ Starting netlify dev with Create React App ␊
    ␊
    ␊
    > start␊
    > react-scripts start␊
    ␊
    `

## should throw if framework=#custom but command is missing

> Snapshot 1

    `␊
    ✨  netlify dev  ✨␊
    ␊
     ◈ Loading environment variables ␊
    ␊
    ␊
    ◈ 'command' and 'targetPort' properties are required when 'framework' is set to '#custom'`

## should throw if framework=#custom but targetPort is missing

> Snapshot 1

    `␊
    ✨  netlify dev  ✨␊
    ␊
     ◈ Loading environment variables ␊
    ␊
    ␊
    ◈ 'command' and 'targetPort' properties are required when 'framework' is set to '#custom'`

## should start custom command if framework=#custom, command and targetPort are configured

> Snapshot 1

    `␊
    ✨  netlify dev  ✨␊
    ␊
     ◈ Loading environment variables ␊
    ␊
    ␊
     ◈ Setting up local development server ␊
    ␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 0.0.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
     /file/path␊
    ​␊
    > Config file␊
     /file/path␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
     ◈ Starting netlify dev with #custom ␊
    ␊
    hello␊
    `

## should print specific error when command doesn't exist

> Snapshot 1

    `␊
    ✨  netlify dev  ✨␊
    ␊
     ◈ Loading environment variables ␊
    ␊
    ␊
    ◈ Unable to determine public folder to serve files from. Using current working directory␊
    ◈ Setup a netlify.toml file with a [dev] section to specify your dev server settings.␊
    ◈ See docs at: https://cli.netlify.com/netlify-dev#project-detection␊
     ◈ Setting up local development server ␊
    ␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 0.0.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
     /file/path␊
    ​␊
    > Config file␊
      No config file was defined: using default values.␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
     ◈ Starting netlify dev with #custom ␊
    `

## should prompt when multiple frameworks are detected

> Snapshot 1

    `␊
    ✨  netlify dev  ✨␊
    ␊
     ◈ Loading environment variables ␊
    ␊
    ␊
    ? Multiple possible start commands found (Use arrow keys or type to search)␊
    > [Gatsby] 'npm run develop' ␊
      [Create React App] 'npm run start' [2A[37D[75C[2B[2K[1A[2K[1A[2K[G? Multiple possible start commands found ␊
      [Gatsby] 'npm run develop' ␊
    > [Create React App] 'npm run start' [2A[37D[41C[2B[2K[1A[2K[1A[2K[G? Multiple possible start commands found Create React App-npm run start[71D[71C␊
    Add 'framework = "create-react-app"' to the [dev] section of your netlify.toml to avoid this selection prompt next time␊
     ◈ Setting up local development server ␊
    ␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 0.0.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
     /file/path␊
    ​␊
    > Config file␊
      No config file was defined: using default values.␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
     ◈ Starting netlify dev with Create React App ␊
    ␊
    ␊
    > start␊
    > react-scripts start␊
    ␊
    `

## should not run framework detection if command and targetPort are configured

> Snapshot 1

    `␊
    ✨  netlify dev  ✨␊
    ␊
     ◈ Loading environment variables ␊
    ␊
    ␊
    ◈ Unable to determine public folder to serve files from. Using current working directory␊
    ◈ Setup a netlify.toml file with a [dev] section to specify your dev server settings.␊
    ◈ See docs at: https://cli.netlify.com/netlify-dev#project-detection␊
     ◈ Setting up local development server ␊
    ␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 0.0.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
     /file/path␊
    ​␊
    > Config file␊
      No config file was defined: using default values.␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
     ◈ Starting netlify dev with custom config ␊
    ␊
    hello␊
    `

## should pass framework-info env to framework sub process

> Snapshot 1

    `␊
    ✨  netlify dev  ✨␊
    ␊
     ◈ Loading environment variables ␊
    ␊
    ␊
     ◈ Setting up local development server ␊
    ␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
    > Version␊
      @netlify/build 0.0.0␊
    ​␊
    > Flags␊
      offline: true␊
    ​␊
    > Current directory␊
     /file/path␊
    ​␊
    > Config file␊
      No config file was defined: using default values.␊
    ​␊
    > Context␊
      dev␊
    ​␊
    ────────────────────────────────────────────────────────────────␊
      1. Run command for local development                          ␊
    ────────────────────────────────────────────────────────────────␊
    ​␊
     ◈ Starting netlify dev with Nuxt 3 ␊
    ␊
    ␊
    > dev␊
    > node -p process.env.NODE_VERSION␊
    ␊
    14␊
    `
